#!/usr/bin/env bash

set -x

# make sure to install feh so pywal can use it to set the wallpaper

FOLDER=$( [ -z "$1" ] && echo ~/wp || echo "$1" )

# wallpaper file path stored in ~/.cache/wal/wal
wal --saturate 0.75 -i "$FOLDER"

# run asynchronously so we don't block rofi from closing if using wallpaper menu
dispatch_shell_colors &
launch_spotify &
pywalfox update &
pywal-discord -t wal &

set +x